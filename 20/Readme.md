# 2017-09-25
자바스크립트는 "이벤트 루프"에 기반한 동시성(concurrency) 모델을 가지고 있습니다. 이 모델은 C 또는 Java와 같은 언어와 완전히 다릅니다.
## 런타임 개념
모던 자바스크립트 엔진은 다음과 같은 개념을 구현하고 최적화한다.<br>
![image](1.svg)<br>
### 스택
[js](1.js)<br>
함수 호출은 프레임들의 스택을 형성한다.<br>
### 힙
객체들은 힙 안에 할당됩니다. 힙은 구조화되지 않은 넓은 메모리 영역을 지칭합니다.(동적 메모리)
### 큐
자바스크립트 런타임은 메시지 큐를 가지고 있습니다. 이 큐는 처리될 메시지들의 리스트 입니다. 각 메시지에는 함수가 연관 되어 있습니다. 스택이 비어 있으면 큐에서 하나의 메시지가 꺼내지고 처리 됩니다. 이 처리는 연관된 함수를 호출하는 것으로 구성됩니다 (결과적으로 초기 스택 프레임을 생성합니다). 메시지 처리는 스택이 다시 비워질 때 종료 됩니다. (FIFO로 처리된다.)
## 이벤트 루프
    while(queue.waitForMessage()) // 다음 메세지가 오기를 기다린다.
        Queue.poll()
다음과 같은 코드로 진행된다 하네요.
### Run-to-completion
각각의 메시지는 다른 어떤 메시지가 처리 되기 전에 완전히 처리 됩니다.
### 메세지 추가
웹브라우저에서는 이벤트가 발생하고 그에 해당하는 이벤트 리스너가 있을 때 언제든 메시지가 추가 됩니다. 아무런 리스너가 없다면 그 이벤트는 버려집니다. 클릭 이벤트 핸들러가 있는 요소에 대한 클릭은 메시지를 추가 합니다.
### Zero delays
[js](2.js)<br>
    setTimeout(,0) // 처리하기 위해 필요한 최소 시간 = 0
    // 더 걸릴 수 있다는 말이다.